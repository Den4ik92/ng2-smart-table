import { Subject } from 'rxjs';
import { SmartTableOnChangedEventName } from '../interfaces/smart-table.models';
export class DataSource {
    constructor() {
        this.onChangedSource = new Subject();
        this.onAddedSource = new Subject();
        this.onUpdatedSource = new Subject();
        this.onRemovedSource = new Subject();
    }
    refresh() {
        this.emitOnChanged(SmartTableOnChangedEventName.refresh);
    }
    load(data) {
        this.emitOnChanged(SmartTableOnChangedEventName.load);
        return Promise.resolve(true);
    }
    onChanged() {
        return this.onChangedSource.asObservable();
    }
    onAdded() {
        return this.onAddedSource.asObservable();
    }
    onUpdated() {
        return this.onUpdatedSource.asObservable();
    }
    onRemoved() {
        return this.onRemovedSource.asObservable();
    }
    prepend(element) {
        this.emitOnAdded(element);
        this.emitOnChanged(SmartTableOnChangedEventName.prepend);
        return Promise.resolve(true);
    }
    append(element) {
        this.emitOnAdded(element);
        this.emitOnChanged(SmartTableOnChangedEventName.append);
        return Promise.resolve(true);
    }
    add(element) {
        this.emitOnAdded(element);
        this.emitOnChanged(SmartTableOnChangedEventName.add);
        return Promise.resolve(true);
    }
    remove(element) {
        this.emitOnRemoved(element);
        this.emitOnChanged(SmartTableOnChangedEventName.remove);
        return Promise.resolve(true);
    }
    update(element, values) {
        this.emitOnUpdated(element);
        this.emitOnChanged(SmartTableOnChangedEventName.update);
        return Promise.resolve(true);
    }
    empty() {
        this.emitOnChanged(SmartTableOnChangedEventName.empty);
        return Promise.resolve(true);
    }
    setSort(conf, doEmit) {
        if (doEmit) {
            this.emitOnChanged(SmartTableOnChangedEventName.sort);
        }
    }
    setFilter(conf, andOperator, doEmit) {
        if (doEmit) {
            this.emitOnChanged(SmartTableOnChangedEventName.filter);
        }
    }
    addFilter(fieldConf, andOperator, doEmit) {
        if (doEmit) {
            this.emitOnChanged(SmartTableOnChangedEventName.filter);
        }
    }
    setPaging(page, perPage, doEmit) {
        if (doEmit) {
            this.emitOnChanged(SmartTableOnChangedEventName.paging);
        }
    }
    setPage(page, doEmit) {
        if (doEmit) {
            this.emitOnChanged(SmartTableOnChangedEventName.page);
        }
    }
    emitOnRemoved(element) {
        this.onRemovedSource.next(element);
    }
    emitOnUpdated(element) {
        this.onUpdatedSource.next(element);
    }
    emitOnAdded(element) {
        this.onAddedSource.next(element);
    }
    emitOnChanged(action) {
        this.getElements().then((elements) => this.onChangedSource.next({
            action: action,
            elements: elements,
            paging: this.getPaging(),
            filter: this.getFilter(),
            sort: this.getSort(),
        }));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS1zb3VyY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZzItc21hcnQtdGFibGUvc3JjL2xpYi9saWIvZGF0YS1zb3VyY2UvZGF0YS1zb3VyY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUUvQixPQUFPLEVBQXdFLDRCQUE0QixFQUEwRSxNQUFNLGtDQUFrQyxDQUFDO0FBRTlOLE1BQU0sT0FBZ0IsVUFBVTtJQUFoQztRQUVZLG9CQUFlLEdBQUcsSUFBSSxPQUFPLEVBQTRCLENBQUM7UUFDMUQsa0JBQWEsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO1FBQ25DLG9CQUFlLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUNyQyxvQkFBZSxHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7SUF3SGpELENBQUM7SUEvR0MsT0FBTztRQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsNEJBQTRCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVELElBQUksQ0FBSSxJQUFjO1FBQ3BCLElBQUksQ0FBQyxhQUFhLENBQUMsNEJBQTRCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEQsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzdDLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzNDLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzdDLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksRUFBRSxD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QUFXLENBQUMsT0FBVTtRQUM5QixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRVMsYUFBYSxDQUFDLE1BQW9DO1FBQzFELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDO1lBQzlELE1BQU0sRUFBRSxNQUFNO1lBQ2QsUUFBUSxFQUFFLFFBQVE7WUFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDeEIsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDeEIsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUU7U0FDckIsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBTbWFydFRhYmxlRmlsdGVyQ29uZiwgU21hcnRUYWJsZUZpbHRlckl0ZW0sIFNtYXJ0VGFibGVPbkNoYW5nZWRFdmVudCwgU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZSwgU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50VHlwZSwgU21hcnRUYWJsZVBhZ2luZ0l0ZW0sIFNtYXJ0VGFibGVTb3J0SXRlbSB9IGZyb20gJy4uL2ludGVyZmFjZXMvc21hcnQtdGFibGUubW9kZWxzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERhdGFTb3VyY2U8VD1hbnk+IHtcblxuICBwcm90ZWN0ZWQgb25DaGFuZ2VkU291cmNlID0gbmV3IFN1YmplY3Q8U21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50PigpO1xuICBwcm90ZWN0ZWQgb25BZGRlZFNvdXJjZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgcHJvdGVjdGVkIG9uVXBkYXRlZFNvdXJjZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgcHJvdGVjdGVkIG9uUmVtb3ZlZFNvdXJjZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcblxuICBhYnN0cmFjdCBnZXRBbGwoKTogUHJvbWlzZTxUW10+O1xuICBhYnN0cmFjdCBnZXRFbGVtZW50cygpOiBQcm9taXNlPFRbXT47XG4gIGFic3RyYWN0IGdldFNvcnQoKTogU21hcnRUYWJsZVNvcnRJdGVtW107XG4gIGFic3RyYWN0IGdldEZpbHRlcigpOiBTbWFydFRhYmxlRmlsdGVyQ29uZjtcbiAgYWJzdHJhY3QgZ2V0UGFnaW5nKCk6IFNtYXJ0VGFibGVQYWdpbmdJdGVtO1xuICBhYnN0cmFjdCBjb3VudCgpOiBudW1iZXI7XG5cbiAgcmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5yZWZyZXNoKTtcbiAgfVxuXG4gIGxvYWQ8VD4oZGF0YTogQXJyYXk8VD4pOiBQcm9taXNlPHRydWU+IHtcbiAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5sb2FkKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICB9XG5cbiAgb25DaGFuZ2VkKCk6IE9ic2VydmFibGU8U21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50PiB7XG4gICAgcmV0dXJuIHRoaXMub25DaGFuZ2VkU291cmNlLmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgb25BZGRlZCgpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm9uQWRkZWRTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBvblVwZGF0ZWQoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5vblVwZGF0ZWRTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBvblJlbW92ZWQoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5vblJlbW92ZWRTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBwcmVwZW5kKGVsZW1lbnQ6IFQpOiBQcm9taXNlPHRydWU+IHtcbiAgICB0aGlzLmVtaXRPbkFkZGVkKGVsZW1lbnQpO1xuICAgIHRoaXMuZW1pdE9uQ2hhbmdlZChTbWFydFRhYmxlT25DaGFuZ2VkRXZlbnROYW1lLnByZXBlbmQpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gIH1cblxuICBhcHBlbmQoZWxlbWVudDogVCk6IFByb21pc2U8dHJ1ZT4ge1xuICAgIHRoaXMuZW1pdE9uQWRkZWQoZWxlbWVudCk7XG4gICAgdGhpcy5lbWl0T25DaGFuZ2VkKFNtYXJ0VGFibGVPbkNoYW5nZWRFdmVudE5hbWUuYXBwZW5kKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICB9XG5cbiAgYWRkKGVsZW1lbnQ6IFQpOiBQcm9taXNlPHRydWU+IHtcbiAgICB0aGlzLmVtaXRPbkFkZGVkKGVsZW1lbnQpO1xuICAgIHRoaXMuZW1pdE9uQ2hhbmdlZChTbWFydFRhYmxlT25DaGFuZ2VkRXZlbnROYW1lLmFkZCk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgfVxuXG4gIHJlbW92ZShlbGVtZW50OiBUKTogUHJvbWlzZTx0cnVlPiB7XG4gICAgdGhpcy5lbWl0T25SZW1vdmVkKGVsZW1lbnQpO1xuICAgIHRoaXMuZW1pdE9uQ2hhbmdlZChTbWFydFRhYmxlT25DaGFuZ2VkRXZlbnROYW1lLnJlbW92ZSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgfVxuXG4gIHVwZGF0ZShlbGVtZW50OiBULCB2YWx1ZXM6IGFueSk6IFByb21pc2U8dHJ1ZT4ge1xuICAgIHRoaXMuZW1pdE9uVXBkYXRlZChlbGVtZW50KTtcbiAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS51cGRhdGUpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gIH1cblxuICBlbXB0eSgpOiBQcm9taXNlPHRydWU+IHtcbiAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5lbXB0eSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgfVxuXG4gIHNldFNvcnQoY29uZjogQXJyYXk8YW55PiwgZG9FbWl0PzogYm9vbGVhbikge1xuICAgIGlmIChkb0VtaXQpIHtcbiAgICAgIHRoaXMuZW1pdE9uQ2hhbmdlZChTbWFydFRhYmxlT25DaGFuZ2VkRXZlbnROYW1lLnNvcnQpO1xuICAgIH1cbiAgfVxuXG4gIHNldEZpbHRlcihjb25mOiBBcnJheTxhbnk+LCBhbmRPcGVyYXRvcj86IGJvb2xlYW4sIGRvRW1pdD86IGJvb2xlYW4pIHtcbiAgICBpZiAoZG9FbWl0KSB7XG4gICAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5maWx0ZXIpO1xuICAgIH1cbiAgfVxuXG4gIGFkZEZpbHRlcihmaWVsZENvbmY6IHt9LCBhbmRPcGVyYXRvcj86IGJvb2xlYW4sIGRvRW1pdD86IGJvb2xlYW4pIHtcbiAgICBpZiAoZG9FbWl0KSB7XG4gICAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5maWx0ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHNldFBhZ2luZyhwYWdlOiBudW1iZXIsIHBlclBhZ2U6IG51bWJlciwgZG9FbWl0PzogYm9vbGVhbikge1xuICAgIGlmIChkb0VtaXQpIHtcbiAgICAgIHRoaXMuZW1pdE9uQ2hhbmdlZChTbWFydFRhYmxlT25DaGFuZ2VkRXZlbnROYW1lLnBhZ2luZyk7XG4gICAgfVxuICB9XG5cbiAgc2V0UGFnZShwYWdlOiBudW1iZXIsIGRvRW1pdD86IGJvb2xlYW4pIHtcbiAgICBpZiAoZG9FbWl0KSB7XG4gICAgICB0aGlzLmVtaXRPbkNoYW5nZWQoU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50TmFtZS5wYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZW1pdE9uUmVtb3ZlZChlbGVtZW50OiBUKSB7XG4gICAgdGhpcy5vblJlbW92ZWRTb3VyY2UubmV4dChlbGVtZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBlbWl0T25VcGRhdGVkKGVsZW1lbnQ6IFQpIHtcbiAgICB0aGlzLm9uVXBkYXRlZFNvdXJjZS5uZXh0KGVsZW1lbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGVtaXRPbkFkZGVkKGVsZW1lbnQ6IFQpIHtcbiAgICB0aGlzLm9uQWRkZWRTb3VyY2UubmV4dChlbGVtZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBlbWl0T25DaGFuZ2VkKGFjdGlvbjogU21hcnRUYWJsZU9uQ2hhbmdlZEV2ZW50VHlwZSkge1xuICAgIHRoaXMuZ2V0RWxlbWVudHMoKS50aGVuKChlbGVtZW50cykgPT4gdGhpcy5vbkNoYW5nZWRTb3VyY2UubmV4dCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGVsZW1lbnRzOiBlbGVtZW50cyxcbiAgICAgIHBhZ2luZzogdGhpcy5nZXRQYWdpbmcoKSxcbiAgICAgIGZpbHRlcjogdGhpcy5nZXRGaWx0ZXIoKSxcbiAgICAgIHNvcnQ6IHRoaXMuZ2V0U29ydCgpLFxuICAgIH0pKTtcbiAgfVxufVxuIl19